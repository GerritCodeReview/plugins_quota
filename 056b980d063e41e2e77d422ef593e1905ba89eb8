{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f841c992_76074952",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-09-08T20:55:14Z",
      "side": 1,
      "message": "We probably should not have this logic here anymore either, the workQueue already calls onNotReadyToStart for all tasks which need to have their resources released.",
      "revId": "056b980d063e41e2e77d422ef593e1905ba89eb8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "685b26e9_5369128e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-09-08T21:08:19Z",
      "side": 1,
      "message": "One thing to note is that even though we have made them implement TaskParker we haven\u0027t wired them yet to guice. So it actually doesn\u0027t call those methods automatically. \n\nThe reason for doing that is we initialize those quotas during runtime after the start of a command. We construct list of quotas by looking at the project on the task. If we were to do that wiring, each parker has to implement the logic of decoding the project and fetching appropriate configs.",
      "parentUuid": "f841c992_76074952",
      "revId": "056b980d063e41e2e77d422ef593e1905ba89eb8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "659468f6_0eb818bc",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-09-08T21:12:02Z",
      "side": 1,
      "message": "I am not suggesting that you wire them up with Guice, rather this class should behave as a proxy/multiplexer instead. Just call the applicable quotas from onNotReadyToStart(), and onStop() (and probably also onStart) as you do here for isReadyToStart().",
      "parentUuid": "685b26e9_5369128e",
      "revId": "056b980d063e41e2e77d422ef593e1905ba89eb8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08a1580d_4eac5556",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-09-08T20:55:14Z",
      "side": 1,
      "message": "Should this be calling quota.onStop?",
      "revId": "056b980d063e41e2e77d422ef593e1905ba89eb8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fb789d7_81423f6d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-09-08T21:11:30Z",
      "side": 1,
      "message": "done on line #125",
      "parentUuid": "08a1580d_4eac5556",
      "revId": "056b980d063e41e2e77d422ef593e1905ba89eb8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be40fff1_422dcf07",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-09-08T21:13:50Z",
      "side": 1,
      "message": "OK, but that\u0027s convoluted and hard to follow, which is why behaving as proxy would probably be easier to understand here.",
      "parentUuid": "3fb789d7_81423f6d",
      "revId": "056b980d063e41e2e77d422ef593e1905ba89eb8",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}