{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d0deced3_8d76fd39",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "Since this is a single Semaphore, not a list|set of Semaphores per user -\u003e s/quotasByUser/quotaByUser/",
      "range": {
        "startLine": 26,
        "startChar": 53,
        "endLine": 26,
        "endChar": 65
      },
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1ff7ab8_69cc4c74",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:09:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0deced3_8d76fd39",
      "range": {
        "startLine": 26,
        "startChar": 53,
        "endLine": 26,
        "endChar": 65
      },
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f98de976_67b57ff3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "It\u0027s unclear what \"s\" represents here? I think it is the username from the task id? Can you improve this?",
      "range": {
        "startLine": 36,
        "startChar": 46,
        "endLine": 36,
        "endChar": 47
      },
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c640a33_bde74791",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:09:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f98de976_67b57ff3",
      "range": {
        "startLine": 36,
        "startChar": 46,
        "endLine": 36,
        "endChar": 47
      },
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fa89ae1_1891cb35",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "I believe release() can currently be called at the same time as another thread is calling release() or tryAcquire(), and if that is the case, this is racy since a thread could acquire the sempahore right after the check above, but before it is removed from the map below.",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19248dc0_807d9a77",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T16:36:15Z",
      "side": 1,
      "message": "I made the method synchronized. Do you want to use locks instead ?",
      "parentUuid": "0fa89ae1_1891cb35",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9e391ff_75d7556a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T17:01:04Z",
      "side": 1,
      "message": "The synchronized does not cover the tryAcquire() method, so this won\u0027t work as is. Ideally we would not use locking approach here, but rathe take advantage of some method that the ConcurrentHashMap might provide to do this safely.",
      "parentUuid": "19248dc0_807d9a77",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c571ec0_a4d9d3ba",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:09:22Z",
      "side": 1,
      "message": "used `ConcurrentHashMap#computeIfPresent`. returning null from remappingFunction  would basically remove that key",
      "parentUuid": "a9e391ff_75d7556a",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "279fd64f_f961587c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "What happens to this string when the user does not have a username defined?",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a1d65301_f60c436b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/PerUserTaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:52:04Z",
      "side": 1,
      "message": "https://gerrit.googlesource.com/gerrit/+/refs/heads/master/java/com/google/gerrit/sshd/BaseCommand.java#458\n\nWe just wouldn\u0027t have it included then.",
      "parentUuid": "279fd64f_f961587c",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87c50d80_e9b826d1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "This is confusing since permits in one case means a number, and in the other a Semaphore. Since this is a common problem, and java is an object oriented language, and thus variable mostly represent objects, I suggest generally using something in the variable name to indicate when instead a scalar or something is represented, such as \"numPermits\", or better here \"maxPermits\".",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a3c7e84_ba2e45d5",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuota.java",
        "patchSetId": 1
      },
      "lineNbr": 26,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:09:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "87c50d80_e9b826d1",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "032a018d_15465eaa",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotaPerUserForTaskForQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "Should this not have it\u0027s own build() method?",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c4a4df8_a6a4377b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotaPerUserForTaskForQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T16:36:15Z",
      "side": 1,
      "message": "Not necessarily since the config syntax is all same with `TaskQuotaForTaskForQueue`",
      "parentUuid": "032a018d_15465eaa",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3daea870_f77a7b17",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotaPerUserForTaskForQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T17:01:04Z",
      "side": 1,
      "message": "Currently TaskQuotaPerUserForTaskForQueue::build does not exist as a method, because there is no \"inheritance\" on static methods, so I am surprised this even compiles.",
      "parentUuid": "2c4a4df8_a6a4377b",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7e58a55_61f8660b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotaPerUserForTaskForQueue.java",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:09:22Z",
      "side": 1,
      "message": "I think it should inherit everything and we can also hide and define new implementation here if need be.",
      "parentUuid": "3daea870_f77a7b17",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf219b39_24fc2ea7",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "I\u0027m not sure \"permits\" is accurate now?",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8c92d93f_184674db",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/quota/TaskQuotas.java",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:09:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bf219b39_24fc2ea7",
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "70068d25_9ea18db5",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 1
      },
      "lineNbr": 271,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-07-07T16:32:26Z",
      "side": 1,
      "message": "s/available/applicable/ ?",
      "range": {
        "startLine": 271,
        "startChar": 14,
        "endLine": 271,
        "endChar": 24
      },
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "394ef473_d2ca1ff4",
        "filename": "src/main/resources/Documentation/config.md",
        "patchSetId": 1
      },
      "lineNbr": 271,
      "author": {
        "id": 4069542
      },
      "writtenOn": "2025-07-07T19:09:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "70068d25_9ea18db5",
      "range": {
        "startLine": 271,
        "startChar": 14,
        "endLine": 271,
        "endChar": 24
      },
      "revId": "3f71d478c9ac303b43b9b51ec205cfbcdc68907c",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}